{"version":3,"sources":["../static/js/myCourses.6a92d590.chunk.js","routes/MyCourses/components/MainView.js","routes/MyCourses/components/userCoursesList.js","routes/MyCourses/containers/UserCoursesListContainer.js","routes/MyCourses/components/myCourses.scss","routes/MyCourses/containers/MainViewContainer.js"],"names":["webpackJsonp","1414","module","__webpack_exports__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_0_react___default","n","__WEBPACK_IMPORTED_MODULE_1__containers_UserCoursesListContainer__","__WEBPACK_IMPORTED_MODULE_2_react_router__","MainView","props","Object","keys","auth","user","length","push","pathname","a","createElement","className","propTypes","PropTypes","string","object","1415","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","__WEBPACK_IMPORTED_MODULE_1_firebase__","__WEBPACK_IMPORTED_MODULE_1_firebase___default","__WEBPACK_IMPORTED_MODULE_3__myCourses_scss__","_createClass","defineProperties","target","i","descriptor","defineProperty","key","protoProps","staticProps","UserCoursesList","_Component","this","_this","getPrototypeOf","state","courses","coursesLoaded","userCourses","fetchCourses","setState","_this2","promises","map","item","database","ref","courseId","once","then","snapshot","val","id","Promise","all","result","newResult","filter","course","courseFromUser","find","numberWatchedlessons","uniqueWatchedLessonsIds","newSections","sections","sectionNumber","lessonsNumbersArray","section","lessonsIds","numberLessonsInCourse","reduce","b","percent","Math","round","style","margin","role","aria-valuenow","aria-valuemin","aria-valuemax","width","userVipCourses","vipCourseFromUser","_this3","concat","padding","src","mainPhoto","height","alt","name","description","renderProgressBar","isVip","color","onClick","_state","renderCourses","array","1416","__WEBPACK_IMPORTED_MODULE_0_react_redux__","__WEBPACK_IMPORTED_MODULE_1__components_userCoursesList__","mapStateToProps","1440","exports","p","615","__WEBPACK_IMPORTED_MODULE_1__components_MainView__"],"mappings":"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","file":"static/js/myCourses.6a92d590.chunk.js","sourcesContent":["webpackJsonp([11],{\n\n/***/ 1414:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__containers_UserCoursesListContainer__ = __webpack_require__(1416);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_react_router__ = __webpack_require__(21);\nvar MainView=function MainView(props){if(!Object.keys(props.auth.user).length){__WEBPACK_IMPORTED_MODULE_2_react_router__[\"b\" /* browserHistory */].push({pathname:'/'});}return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'container'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1__containers_UserCoursesListContainer__[\"a\" /* default */],null));};MainView.propTypes={user:__WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.string,auth:__WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.object};/* harmony default export */ __webpack_exports__[\"a\"] = (MainView);\n\n/***/ }),\n\n/***/ 1415:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_firebase__ = __webpack_require__(71);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_firebase___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_firebase__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_react_router__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__myCourses_scss__ = __webpack_require__(1440);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__myCourses_scss___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__myCourses_scss__);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var UserCoursesList=function(_Component){_inherits(UserCoursesList,_Component);function UserCoursesList(props){_classCallCheck(this,UserCoursesList);var _this=_possibleConstructorReturn(this,(UserCoursesList.__proto__||Object.getPrototypeOf(UserCoursesList)).call(this,props));_this.state={courses:[],coursesLoaded:false,userCourses:[]};return _this;}_createClass(UserCoursesList,[{key:'componentWillMount',value:function componentWillMount(){var userCourses=this.props.auth.user.userCourses;if(userCourses){this.fetchCourses(userCourses);}else{this.setState({coursesLoaded:true});}}},{key:'fetchCourses',value:function fetchCourses(userCourses){var _this2=this;this.setState({courses:[],coursesLoaded:false});var promises=userCourses.map(function(item){return __WEBPACK_IMPORTED_MODULE_1_firebase___default.a.database().ref('courses/'+item.courseId).once('value').then(function(snapshot){var object=snapshot.val();if(object!==null){object.id=item.courseId;return object;}});});Promise.all(promises).then(function(result){var newResult=result.filter(function(item){return item;});// const uniqueNewResult = result.filter((item, pos) => { return result.indexOf(item) === pos })\n_this2.setState({courses:newResult,coursesLoaded:true});// console.log(uniqueNewResult)\n});}},{key:'renderProgressBar',value:function renderProgressBar(course){var userCourses=this.props.auth.user.userCourses;var courseFromUser=userCourses.find(function(item,i){return item.courseId===course.id;});var numberWatchedlessons=courseFromUser.uniqueWatchedLessonsIds?courseFromUser.uniqueWatchedLessonsIds.length:0;var newSections=course.sections.filter(function(item){return item.sectionNumber!==0;});var lessonsNumbersArray=newSections.map(function(section){var lengthLessonsId=section.lessonsIds?section.lessonsIds.length:0;return lengthLessonsId;});var numberLessonsInCourse=lessonsNumbersArray.reduce(function(a,b){return a+b;});var percent=Math.round(numberWatchedlessons/numberLessonsInCourse*100);return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'progress',style:{margin:'0px 0px 10px 10px'}},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'progress-bar',role:'progressbar','aria-valuenow':'40','aria-valuemin':'0','aria-valuemax':'100',style:{width:percent+'%'}},percent,'% Complete')));}},{key:'isVip',value:function isVip(course){var userVipCourses=this.props.auth.user.userVipCourses;var vipCourseFromUser=userVipCourses.find(function(item,i){return item.courseId===course.id;});return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',null,!!vipCourseFromUser&&__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'vip-course'},' VipCourse'),!vipCourseFromUser&&__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'vip-course'}));}},{key:'renderCourses',value:function renderCourses(){var _this3=this;var courses=this.state.courses;var newCourses=[].concat(courses).concat(courses);return newCourses.map(function(course,i){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{key:i,className:'frame-course',style:{padding:'5px',margin:'15px 10px 10px 10px'}},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('img',{src:course.mainPhoto,width:'352px',height:'150px',alt:'loading'}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'caption',style:{padding:'5px 10px 5px 10px'}},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('h5',{className:'frame-name'},course.name,' '),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('h5',{className:'frame-description'},course.description),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',null,_this3.renderProgressBar(course)),_this3.isVip(course),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'button-details',style:{color:'yellow'},onClick:function onClick(){__WEBPACK_IMPORTED_MODULE_2_react_router__[\"b\" /* browserHistory */].push({pathname:'/myCourses/course/'+course.id});}},'More details')));});}},{key:'render',value:function render(){var _state=this.state,coursesLoaded=_state.coursesLoaded,courses=_state.courses;if(!coursesLoaded){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',null,'Loading...');}// const isSCount = (courses.length !== 1)\n// const coursesCount = isSCount ? 'courses' : 'course'\nreturn __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'row'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'col-xs-12 col-md-12',style:{padding:'0px'}},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'col-xs-2 col-md-2 ikon-dragon'}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'col-xs-3 col-md-3 text-place'},'\\u0423\\u043B\\u0443\\u0447\\u0448\\u0438 \\u0441\\u0432\\u043E\\u0438 \\u043D\\u0430\\u0432\\u044B\\u043A\\u0438 \\u0438 \\u043A\\u043E\\u043D\\u0442\\u0440\\u043E\\u043B\\u044C \\u0437\\u0430 \\u0438\\u0433\\u0440\\u043E\\u0439'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'col-xs-7 col-md-7 text-frame'},' \\u0418\\u0437\\u0443\\u0447\\u0438 \\u043C\\u0435\\u0445\\u0430\\u043D\\u0438\\u0437\\u043C \\u0438\\u0433\\u0440\\u044B \\u0438 \\u0432\\u0437\\u0430\\u0438\\u043C\\u043E\\u0434\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u0435 \\u0441 \\u043A\\u043E\\u043C\\u0430\\u043D\\u0434\\u043E\\u0439')),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'col-xs-12 col-md-12 tab',style:{padding:'10px 0px 0px 0px'}},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('span',{className:'my-courses'},'\\u041C\\u043E\\u0438 \\u043A\\u0443\\u0440\\u0441\\u044B'),!courses.length&&__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'no-courses'},' You havent any courses yet'),!!courses.length&&__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'div-scroll scroll-horizontal'},this.renderCourses()))));}}]);return UserCoursesList;}(__WEBPACK_IMPORTED_MODULE_0_react__[\"Component\"]);UserCoursesList.propTypes={userCourses:__WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.array,auth:__WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.object,user:__WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.object};/* harmony default export */ __webpack_exports__[\"a\"] = (UserCoursesList);\n\n/***/ }),\n\n/***/ 1416:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react_redux__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_userCoursesList__ = __webpack_require__(1415);\nvar mapStateToProps=function mapStateToProps(state){return{auth:state.auth};};/* harmony default export */ __webpack_exports__[\"a\"] = (__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_react_redux__[\"connect\"])(mapStateToProps)(__WEBPACK_IMPORTED_MODULE_1__components_userCoursesList__[\"a\" /* default */]));\n\n/***/ }),\n\n/***/ 1440:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/media/myCourses.63cc7836.scss\";\n\n/***/ }),\n\n/***/ 615:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react_redux__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_MainView__ = __webpack_require__(1414);\nvar mapStateToProps=function mapStateToProps(state){return{auth:state.auth};};/* harmony default export */ __webpack_exports__[\"default\"] = (__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_react_redux__[\"connect\"])(mapStateToProps)(__WEBPACK_IMPORTED_MODULE_1__components_MainView__[\"a\" /* default */]));\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/myCourses.6a92d590.chunk.js","import React from 'react'\r\nimport UserCoursesList from '../containers/UserCoursesListContainer'\r\nimport { browserHistory } from 'react-router'\r\n\r\nconst MainView = (props) => {\r\n  if (!Object.keys(props.auth.user).length) {\r\n    browserHistory.push({ pathname: `/` })\r\n  }\r\n  return (\r\n    <div className='container'>\r\n      <UserCoursesList />\r\n    </div>\r\n  )\r\n}\r\nMainView.propTypes = {\r\n  user: React.PropTypes.string,\r\n  auth: React.PropTypes.object\r\n}\r\nexport default MainView\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/MyCourses/components/MainView.js","import React, { Component } from 'react'\r\nimport firebase from 'firebase'\r\nimport { browserHistory } from 'react-router'\r\nimport './myCourses.scss'\r\n\r\nclass UserCoursesList extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n    this.state = {\r\n      courses: [],\r\n      coursesLoaded: false,\r\n      userCourses: []\r\n    }\r\n  }\r\n\r\n  componentWillMount () {\r\n    const { userCourses } = this.props.auth.user\r\n    if (userCourses) {\r\n      this.fetchCourses(userCourses)\r\n    } else {\r\n      this.setState({\r\n        coursesLoaded: true\r\n      })\r\n    }\r\n  }\r\n\r\n  fetchCourses (userCourses) {\r\n    this.setState({\r\n      courses: [],\r\n      coursesLoaded: false\r\n    })\r\n\r\n    const promises = userCourses.map(item => {\r\n      return firebase.database().ref('courses/' + item.courseId)\r\n      .once('value')\r\n      .then(snapshot => {\r\n        const object = snapshot.val()\r\n        if (object !== null) {\r\n          object.id = item.courseId\r\n          return (object)\r\n        }\r\n      })\r\n    })\r\n    Promise.all(promises).then(result => {\r\n      const newResult = result.filter(item => item)\r\n      // const uniqueNewResult = result.filter((item, pos) => { return result.indexOf(item) === pos })\r\n      this.setState({\r\n        courses: newResult,\r\n        coursesLoaded: true\r\n      })\n      // console.log(uniqueNewResult)\r\n    })\r\n  }\r\n\r\n  renderProgressBar (course) {\r\n    const { userCourses } = this.props.auth.user\r\n    const courseFromUser = userCourses.find((item, i) => item.courseId === course.id)\r\n    const numberWatchedlessons = courseFromUser.uniqueWatchedLessonsIds ? courseFromUser.uniqueWatchedLessonsIds.length : 0\r\n    const newSections = course.sections.filter((item) => item.sectionNumber !== 0)\r\n    const lessonsNumbersArray = newSections.map(section => {\r\n      const lengthLessonsId = section.lessonsIds ? section.lessonsIds.length : 0\r\n      return lengthLessonsId\r\n    })\r\n    const numberLessonsInCourse = lessonsNumbersArray.reduce((a, b) => {\r\n      return a + b\r\n    })\r\n    const percent = Math.round(numberWatchedlessons / numberLessonsInCourse * 100)\r\n    return (\r\n      <div>\r\n        <div className='progress' style={{ margin: '0px 0px 10px 10px' }}>\r\n          <div className='progress-bar' role='progressbar' aria-valuenow='40'\r\n            aria-valuemin='0' aria-valuemax='100' style={{ width: `${percent}%` }}>\r\n            {percent}% Complete\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n  isVip (course) {\r\n    const { userVipCourses } = this.props.auth.user\r\n    const vipCourseFromUser = userVipCourses.find((item, i) => item.courseId === course.id)\r\n    return (\r\n      <div>\r\n        {!!vipCourseFromUser && <div className='vip-course'> VipCourse</div> }\r\n        {!vipCourseFromUser && <div className='vip-course'></div> }\r\n      </div>\r\n    )\r\n  }\r\n\r\n  renderCourses () {\r\n    const { courses } = this.state\r\n    const newCourses = [].concat(courses).concat(courses)\r\n      return newCourses.map((course, i) => (\r\n        <div key={i} className='frame-course' style={{ padding: '5px', margin: '15px 10px 10px 10px' }}>\r\n          <img src={course.mainPhoto} width='352px' height='150px' alt='loading' />\r\n          <div className='caption' style={{ padding: '5px 10px 5px 10px' }}>\r\n            <h5 className='frame-name'>{course.name} </h5>\r\n            <h5 className='frame-description'>{course.description}</h5>\r\n            <div>\r\n              {this.renderProgressBar(course)}\r\n            </div>\r\n            {this.isVip(course)}\r\n            <div\r\n              className='button-details'\r\n              style={{ color: 'yellow' }}\r\n              onClick={() => { browserHistory.push({ pathname: `/myCourses/course/${course.id}` }) }}\r\n              >More details\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ))\r\n  }\r\n\r\n  render () {\r\n    const { coursesLoaded, courses } = this.state\r\n    if (!coursesLoaded) {\r\n      return (<div>Loading...</div>)\r\n    }\r\n    // const isSCount = (courses.length !== 1)\r\n    // const coursesCount = isSCount ? 'courses' : 'course'\r\n    return (\r\n      <div className='row'>\r\n        <div className='col-xs-12 col-md-12' style={{ padding: '0px' }}>\r\n          <div className='col-xs-2 col-md-2 ikon-dragon'></div>\r\n          <div className='col-xs-3 col-md-3 text-place'>Улучши свои навыки и контроль за игрой</div>\r\n          <div className='col-xs-7 col-md-7 text-frame'> Изучи механизм игры и взаимодействие с командой</div>\r\n        </div>\r\n        <div className='col-xs-12 col-md-12 tab' style={{ padding: '10px 0px 0px 0px' }}>\r\n          <div>\r\n            <span className='my-courses'>Мои курсы</span>\r\n            {!courses.length && <div className='no-courses'> You havent any courses yet</div>}\r\n            {!!courses.length && <div className='div-scroll scroll-horizontal'>\r\n              {this.renderCourses()}\r\n            </div> }\r\n          </div>\r\n        </div>\r\n        {/* <h4>You have {courses.length} paid {coursesCount}</h4> */}\r\n      </div>\r\n    )\r\n  }\r\n}\r\nUserCoursesList.propTypes = {\r\n  userCourses: React.PropTypes.array,\r\n  auth: React.PropTypes.object,\r\n  user: React.PropTypes.object\r\n}\r\n\r\nexport default UserCoursesList\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/MyCourses/components/userCoursesList.js","import { connect } from 'react-redux'\r\nimport userCoursesList from '../components/userCoursesList'\r\n\r\nconst mapStateToProps = state => ({\r\n  auth: state.auth\r\n})\r\n\r\nexport default connect(mapStateToProps)(userCoursesList)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/MyCourses/containers/UserCoursesListContainer.js","module.exports = __webpack_public_path__ + \"static/media/myCourses.63cc7836.scss\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/routes/MyCourses/components/myCourses.scss\n// module id = 1440\n// module chunks = 11","import { connect } from 'react-redux'\r\nimport MainView from '../components/MainView'\r\n\r\nconst mapStateToProps = state => ({\r\n  auth: state.auth\r\n})\r\n\r\nexport default connect(mapStateToProps)(MainView)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/MyCourses/containers/MainViewContainer.js"],"sourceRoot":""}